(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{313:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(159),i=(n(25),n(3),n(1)),s=n.n(i),l=(n(46),n(100)),u=(n(8),n(4),n(5),n(220),n(17),n(409)),d=n(395);function c(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var p=function(e){function t(){return e.apply(this,arguments)||this}return c(t,e),t.prototype.render=function(){return a.a.createElement(u.a,Object.assign({display:"inline-flex",border:1,borderRadius:3},this.props),this.props.children)},t}(a.a.Component),m=function(e){function t(){return e.apply(this,arguments)||this}return c(t,e),t.prototype.render=function(){var e="input"===this.props.status?"gray":"first"===this.props.status?"blue":"perfect"===this.props.status?"darkgreen":"good"===this.props.status?"lightgreen":"warning"===this.props.status?"yellow":"failed"===this.props.status?"red":"peek"===this.props.status?"blue":(this.props.status,"black"),t=this.props.word;return a.a.createElement("div",{className:"word-card"},a.a.createElement("div",{className:"word-card-common",style:{fontSize:"10vmin"}},"test-common"!==this.props.display&&a.a.createElement("span",{dangerouslySetInnerHTML:{__html:t.common}})),a.a.createElement("div",{className:"word-card-translation",style:{color:e}},a.a.createElement(d.a,null,Object.entries(t.translation).map(function(e){e[0];var t=e[1];return a.a.createElement("li",null,Object.entries(t.translation).map(function(e){var n=e[0],r=e[1];return Object.keys(t.translation).length>1?n+":"+r+"; ":""+r}),a.a.createElement("br",null),t.hint&&a.a.createElement(a.a.Fragment,null,a.a.createElement(p,null,"Hint"),Object.entries(t.hint).map(function(e){var n=e[0],r=e[1];return Object.keys(t.hint).length>1?n+":"+r+"; ":""+r})))}))),a.a.createElement("div",{className:"word-card-sentences"},(t.sentences||[]).map(function(e,t){return a.a.createElement("div",{key:t},a.a.createElement("p",null,a.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.sentence}})),a.a.createElement("p",null,a.a.createElement("span",null,(e.translation||{}).zh)))})))},t}(a.a.Component);m.defaultProps={word:{common:"Common Placeholder",translation:"Translation Placeholder"},display:"detailed",status:"view"};var g=m,y=n(199),v=n(197),f=n(118),E=n(160),h=n.n(E),I=n(408),C=n(399),w=n(401),b=n(402),k=n(359),S=n.n(k),x=n(360),P=n.n(x),j=n(361),U=n.n(j),O=n(362),W=n.n(O);function Q(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,a)}function A(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Q(o,r,a,i,s,"next",e)}function s(e){Q(o,r,a,i,s,"throw",e)}i(void 0)})}}var T=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).JudgeInputElement=null,n.requestJudge=function(){var e=A(s.a.mark(function e(t){var r,a,o,i,l,u;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(void 0===t?{}:t).skip,a=n.props,o=a.poiUserId,i=a.savingId,l=n.props.currentWord.toJS(),e.next=5,n.props.judgeAnswer({answer:n.state.testerInput,word:l,skip:r},{poiUserId:o,savingId:i});case 5:u=e.sent,n.setState({testerInput:""}),"Correct"!==u&&"Accepted"!==u&&"Skipped"!==u||n.requestNext();case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.requestNext=function(){var e=n.props,t=e.poiUserId,r=e.savingId,a=e.currentWordKey,o=e.learnedCandidates,i=e.prioritiedCandidates,s=e.pendingCandidates;n.props.showNextWord({poiUserId:t,savingId:r},{currentWordKey:a,learnedCandidates:o,prioritiedCandidates:i,pendingCandidates:s}),n.setState({testerInput:""})},n.state={testerInput:""},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){var e=A(s.a.mark(function e(){var t,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.debug("Lasy init user"),e.next=3,this.props.lazyInitUser();case 3:return t=e.sent,console.debug("Lasy init saving"),e.next=7,this.props.lazyInitSaving({poiUserId:t});case 7:return n=e.sent,e.next=10,this.props.showNextWord({poiUserId:t,savingId:n});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),o.render=function(){var e=this,t=this.props.currentWord.toJS(),n="Pending"===this.props.judgeResult?"input":"Correct"===this.props.judgeResult?"perfect":"Accepted"===this.props.judgeResult?"good":"Rejected"===this.props.judgeResult?"warning":"Wrong"===this.props.judgeResult?"failed":"review";return a.a.createElement("div",{className:"goi-tester",style:{marginTop:"20px"}},a.a.createElement(h.a,null,a.a.createElement("title",null,"Pending"===this.props.judgeResult?"PoiGoi":"PoiGoi - "+t.key)),a.a.createElement("div",{style:{display:"flex"}},a.a.createElement(I.a,{label:"Justify your answer",variant:"outlined",value:this.state.testerInput,style:{flexGrow:1},onChange:function(t){e.setState({testerInput:t.target.value})},InputProps:{placeholder:"Rejected"===this.props.judgeResult||"Wrong"===this.props.judgeResult?"Type correct answer to continue":"Type your answer here",endAdornment:a.a.createElement(C.a,{position:"end"},a.a.createElement(w.a,{"aria-label":"Request judge",edge:"end",onClick:function(){return e.requestJudge()}},a.a.createElement(S.a,null))),onKeyDown:function(t){"Enter"===t.key&&e.requestJudge()}}}),"Pending"===this.props.judgeResult?a.a.createElement(b.a,{size:"small","aria-label":"Skip current word",onClick:function(){return e.requestJudge({skip:!0})}},"Skip",a.a.createElement(P.a,{fontSize:"small"})):a.a.createElement(b.a,{"aria-label":"Show next word",onClick:function(){return e.requestNext()}},"Skip",a.a.createElement(U.a,{fontSize:"small"}))),a.a.createElement(g,{word:t,display:"detailed",status:n}),a.a.createElement(w.a,{"aria-label":"detail"},a.a.createElement(W.a,null)))},r}(a.a.Component),q=Object(l.b)(function(e){console.debug("GoiTester state: ",e);var t={poiUserId:e.GoiUser.get("PoiUserId"),savingId:e.GoiSaving.get("SavingId"),currentWord:e.GoiTester.get("CurrentWord"),currentWordKey:e.GoiTester.get("CurrentWord").get("key"),judgeResult:e.GoiTester.get("JudgeResult"),saving:e.GoiSaving.get("Saving"),tester:e.GoiTester,learnedCandidates:e.GoiTester.get("LearnedCandidates"),prioritiedCandidates:e.GoiTester.get("PrioritiedCandidates"),pendingCandidates:e.GoiTester.get("PendingCandidates")};return console.debug("GoiTester props: ",t),t},function(e){return{lazyInitUser:function(){return e(Object(y.a)())},lazyInitSaving:function(t){var n=t.poiUserId;return e(Object(v.a)({poiUserId:n}))},showNextWord:function(t,n){var r=t.poiUserId,a=t.savingId,o=void 0===n?{}:n,i=o.currentWordKey,s=o.learnedCandidates,l=o.prioritiedCandidates,u=o.pendingCandidates;return e(Object(f.a)({poiUserId:r,savingId:a},{currentWordKey:i,learnedCandidates:s,prioritiedCandidates:l,pendingCandidates:u}))},judgeAnswer:function(t,n){var r=t.answer,a=t.word,o=t.skip,i=n.poiUserId,s=n.savingId;return e(Object(f.e)({answer:r,word:a,skip:o},{poiUserId:i,savingId:s}))}}})(T),N=n(413),G=n(305),M=n(400),_=n(403),z=n(404),R=n(405),J=n(406),L=n(347),D=n.n(L),F=n(79),B=n(363),K=n.n(B),H=n(346),V=n.n(H),X=n(364),Y=n.n(X);function Z(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,a)}function $(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){Z(o,r,a,i,s,"next",e)}function s(e){Z(o,r,a,i,s,"throw",e)}i(void 0)})}}var ee=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).getSuggestionQuerys=function(){return n.props.suggestions.toJS().map(function(e){return e.Query})},n.getPendingQuerys=function(){return n.props.pendings.toJS().map(function(e){return e.Query})},n.onClickConfirm=$(s.a.mark(function e(){var t,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.poiUserId,r=n.props.savingId,e.next=4,n.props.addWordsFromQuerys({querys:n.getPendingQuerys()},{poiUserId:t,savingId:r});case 4:return n.props.close(),n.getPendingQuerys().map(function(e){return n.props.removePendingQuery({query:e})}),e.next=8,n.props.showNextWord(t,r);case 8:case"end":return e.stop()}},e)})),n.state={customQuery:""},n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this;if(!this.props.display)return a.a.createElement("div",{className:"word-adder"});var t=this.props.poiUserId,n=this.props.savingId,r=this.props.status.toJS(),o=this.props.suggestions.toJS(),i=this.props.pendings.toJS(),s=this.props.counters.toJS();return a.a.createElement(N.a,{className:"word-adder",open:this.props.display},a.a.createElement("div",{style:{marginTop:"20px",marginBottom:"20px"}},a.a.createElement(G.a,null,a.a.createElement(M.a,{gutterBottom:!0,variant:"h4"},"Add words"),a.a.createElement(d.a,{dense:!0},a.a.createElement(_.a,{component:"li"}),a.a.createElement("li",null,a.a.createElement(M.a,{display:"block",variant:"caption"},"Current Study Status")),a.a.createElement(z.a,null,a.a.createElement(I.a,{label:"Learned",value:r.LearnedCount,margin:"none",style:{marginRight:"10px",flex:1},InputProps:{readOnly:!0}}),a.a.createElement(I.a,{label:"Prioritied",value:r.PrioritiedCount,margin:"none",style:{marginRight:"10px",flex:1},InputProps:{readOnly:!0}}),a.a.createElement(I.a,{label:"Pending",value:r.PendingCount,margin:"none",style:{marginRight:"10px",flex:1},InputProps:{readOnly:!0,endAdornment:a.a.createElement(C.a,{position:"end"},a.a.createElement(w.a,{"aria-label":"Clear pending words",onClick:function(){return e.props.clearPendingWords({poiUserId:t,savingId:n})}},a.a.createElement(K.a,null)))}})),a.a.createElement(_.a,{component:"li"}),a.a.createElement("li",null,a.a.createElement(M.a,{display:"block",variant:"caption"},"Suggested Word Lists")),o.map(function(r){return a.a.createElement(z.a,{key:"suggestion"+r.Query},a.a.createElement(R.a,{primary:r.Display+" ("+r.Query+") "+s[r.Query].TotalCount+" words",secondary:s[r.Query]?a.a.createElement(a.a.Fragment,null,a.a.createElement("span",null,"Learned "+s[r.Query].LearnedCount+", "),a.a.createElement("span",null,"Added "+s[r.Query].AddedCount+", "),a.a.createElement("span",null,"New "+s[r.Query].NewCount)):null}),a.a.createElement(J.a,null,a.a.createElement(w.a,{edge:"end","aria-label":"Add suggestion query",onClick:function(){return e.props.addPendingQuery({display:r.Display,query:r.Query},{poiUserId:t,savingId:n})}},a.a.createElement(V.a,null))))}),a.a.createElement("div",{style:{display:"flex"}},a.a.createElement(I.a,{label:"Custom Query",variant:"outlined",value:this.state.customQuery,style:{flexGrow:1},onChange:function(t){e.setState({customQuery:t.target.value})},InputProps:{placeholder:"(e.g. JLPT-N5) Accept RegExp",endAdornment:a.a.createElement(C.a,{position:"end"},a.a.createElement(w.a,{"aria-label":"add query",edge:"end",onClick:function(){return e.props.addPendingQuery({display:"Custom",query:e.state.customQuery.trim()},{poiUserId:t,savingId:n})}},a.a.createElement(D.a,null)))}})),a.a.createElement(z.a,null),a.a.createElement(_.a,{component:"li"}),a.a.createElement("li",null,a.a.createElement(M.a,{display:"block",variant:"caption"},"Words to add (Order matters)")),i.length?i.map(function(t){return a.a.createElement(z.a,{key:"pending"+t.Query},a.a.createElement(R.a,{primary:a.a.createElement(a.a.Fragment,null,t.Display+" ("+t.Query+")",s[t.Query]&&" "+s[t.Query].TotalCount+" words"),secondary:s[t.Query]?a.a.createElement(a.a.Fragment,null,"Learned "+s[t.Query].LearnedCount+", ","Added "+s[t.Query].AddedCount+", ","New "+s[t.Query].NewCount):null}),a.a.createElement(J.a,null,a.a.createElement(w.a,{edge:"end","aria-label":"remove pending query",onClick:function(){return e.props.removePendingQuery({query:t.Query})}},a.a.createElement(Y.a,null))))}):a.a.createElement(z.a,null,a.a.createElement(R.a,null,"No words to add"))),a.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},a.a.createElement(b.a,{onClick:function(){return e.props.close()}},"Cancel"),a.a.createElement(b.a,{variant:"outlined",color:"primary",onClick:this.onClickConfirm},"Add these words")))))},r}(a.a.Component),te=Object(l.b)(function(e){console.debug("WordAdderContainer state: ",e);var t={display:e.WordAdder.get("Display"),status:e.WordAdder.get("Status"),suggestions:e.WordAdder.get("Suggestions"),pendings:e.WordAdder.get("Pendings"),counters:e.WordAdder.get("Counters"),saving:e.GoiSaving.get("Saving"),poiUserId:e.GoiUser.get("PoiUserId"),savingId:e.GoiSaving.get("SavingId")};return console.debug("WordAdderContainer props: ",t),t},function(e){return{clearPendingWords:function(t){var n=t.poiUserId,r=t.savingId;return e(Object(F.c)({poiUserId:n,savingId:r}))},addPendingQuery:function(t,n){var r=t.display,a=t.query,o=n.poiUserId,i=n.savingId;return e(Object(F.a)({display:r,query:a},{poiUserId:o,savingId:i}))},removePendingQuery:function(t){var n=t.query;return e(Object(F.i)({query:n}))},addWordsFromQuerys:function(t,n){var r=t.querys,a=n.poiUserId,o=n.savingId;return e(Object(F.b)({querys:r},{poiUserId:a,savingId:o}))},close:function(){return e(Object(F.e)({display:!1}))},showNextWord:function(t,n){return e(Object(f.a)({poiUserId:t,savingId:n}))}}})(ee),ne=n(414),re=n(415),ae=n(184),oe=n(371),ie=n.n(oe),se=n(370),le=n.n(se),ue=n(367),de=n.n(ue),ce=n(372),pe=n.n(ce),me=n(373),ge=n.n(me),ye=n(366),ve=n.n(ye),fe=n(365),Ee=n.n(fe);var he=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).openMenu=function(){n.setState({menuOpened:!0})},n.closeMenu=function(){n.setState({menuOpened:!1})},n.toggleMenu=function(){n.setState({menuOpened:!n.state.menuOpened})},n.state={menuOpened:!1},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.navigate=function(e){Object(ae.b)(e,{replace:!0})},o.render=function(){var e=this,t=this.props,n=t.poiUserId,r=t.savingId;return a.a.createElement("div",{className:"commands-bar",style:{position:"absolute",bottom:"20px",right:"20px",display:"inline-flex",alignItems:"flex-end"}},a.a.createElement("div",{style:{display:"inline-flex",height:"40px",margin:"8px"}},a.a.createElement(b.a,{size:"small"},"[WIP] SwotUp",a.a.createElement(Ee.a,{fontSize:"small"})),a.a.createElement(b.a,{size:"small"},"[WIP] Sync",a.a.createElement(ve.a,{fontSize:"small"})),a.a.createElement(b.a,{size:"small",onClick:function(){return e.props.showWordAdder({poiUserId:n,savingId:r})}},"Words",a.a.createElement(V.a,{fontSize:"small"}))),a.a.createElement(ne.a,{ariaLabel:"menu",open:this.state.menuOpened,icon:a.a.createElement(de.a,{fontSize:"small"}),onBlur:this.closeMenu,onClick:this.toggleMenu,onClose:this.closeMenu,onFocus:this.openMenu,onMouseEnter:this.openMenu,onMouseLeave:this.closeMenu,ButtonProps:{color:"default",size:"small",style:{background:"white",margin:"8px"}}},a.a.createElement(re.a,{key:"share",icon:a.a.createElement(le.a,{fontSize:"small"}),tooltipTitle:"[WIP] Share",tooltipOpen:!0,onClick:function(){e.closeMenu()}}),a.a.createElement(re.a,{key:"tegami",icon:a.a.createElement(ie.a,{fontSize:"small"}),tooltipTitle:"手紙",tooltipOpen:!0,onClick:function(){e.closeMenu(),e.navigate("/tegami/")}}),a.a.createElement(re.a,{key:"mamechishiki",icon:a.a.createElement(pe.a,null),tooltipTitle:"豆知識",tooltipOpen:!0,onClick:function(){e.closeMenu(),e.navigate("/mamechishiki/")}}),a.a.createElement(re.a,{key:"searchwords",icon:a.a.createElement(D.a,null),tooltipTitle:"[WIP] Search Words",tooltipOpen:!0,onClick:function(){e.closeMenu()}}),a.a.createElement(re.a,{key:"addwords",icon:a.a.createElement(V.a,null),tooltipTitle:"Add Words",tooltipOpen:!0,onClick:function(){e.closeMenu(),e.props.showWordAdder({poiUserId:n,savingId:r})}}),a.a.createElement(re.a,{key:"profile",icon:a.a.createElement(ge.a,null),tooltipTitle:"[WIP] Profile and settings",tooltipOpen:!0,onClick:function(){e.closeMenu(),e.navigate("/")}})))},r}(a.a.Component),Ie=Object(l.b)(function(e){console.debug("CommandsBar state: ",e);var t={poiUserId:e.GoiUser.get("PoiUserId"),savingId:e.GoiSaving.get("SavingId")};return console.debug("CommandsBar props: ",t),t},function(e){return{showWordAdder:function(t){var n=t.poiUserId,r=t.savingId;return e(Object(F.j)({poiUserId:n,savingId:r}))}}})(he),Ce=n(412);t.default=function(e){return a.a.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden",position:"fixed"}},a.a.createElement(Ce.a,{xsDown:!0},a.a.createElement(o.a,null)),a.a.createElement(Ie,null),a.a.createElement("main",null,a.a.createElement(G.a,null,a.a.createElement(te,null),a.a.createElement(q,null))),a.a.createElement("footer",null,a.a.createElement(G.a,null,a.a.createElement("ruby",null,"私",a.a.createElement("rt",null,"わたし")),"たちの",a.a.createElement("ruby",null,"夢",a.a.createElement("rt",null,"ゆめ")),"がここから",a.a.createElement("ruby",null,"始",a.a.createElement("rt",null,"はじ")),"まります ٩(ˊᗜˋ*)و")))}}}]);
//# sourceMappingURL=component---src-pages-index-tsx-3a07332bdd026fe7028c.js.map